<%- include('../partials/header.ejs') -%>

<h1>All Flights</h1>

<table>
<th>
    <tr>
    <td class='head-row'>Airline</td>
    <td class='head-row'>Airport</td>
    <td class='head-row'>Flight Number</td>
    <td class='head-row'>Departure Date</td>
</tr>
</th>
<br>
<% let todayDate = new Date() %>
<% flights.forEach(f => { %>
<tr style='color:<%= f.departs < todayDate ? 'red' : 'black' %>'>
    <td><%= f.airline %></td>
    <td><%= f.airport %></td>
    <td><%= f.flightNo %></td>
    <td><%= f.departs.toLocaleDateString() %></td>
    <td ><a href='/flights/<%= f.flightNo %>' class='more-details'>More Details</a></td>
</tr>
<br>
<% }) %>
</table>


<form action='/flights' method='GET'>
    <label>Sort by Date:
        <select name="sort" >
          <option value="asc" type='submit'>Ascending</option>
          <option value="desc" type='submit'>Descending</option>
        </select>
      </label>
      <button type='submit'>Sort</button>
</form>

<%- include('../partials/footer.ejs') -%>